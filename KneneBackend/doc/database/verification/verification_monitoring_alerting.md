# æ•°æ®åº“éªŒè¯ç³»ç»Ÿç›‘æ§å‘Šè­¦æŒ‡å—

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†æ•°æ®åº“éªŒè¯ç³»ç»Ÿçš„ç›‘æ§æ¶æ„ã€å‘Šè­¦ç­–ç•¥ã€æŒ‡æ ‡ä½“ç³»å’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©è¿ç»´å›¢é˜Ÿå»ºç«‹å®Œå–„çš„ç›‘æ§å‘Šè­¦ä½“ç³»ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œã€‚

## ç›‘æ§æ¶æ„è®¾è®¡

### æ•´ä½“ç›‘æ§æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ç›‘æ§ç³»ç»Ÿæ¶æ„                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        æ•°æ®æ”¶é›†å±‚                                   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ åº”ç”¨æŒ‡æ ‡     â”‚ â”‚ ç³»ç»ŸæŒ‡æ ‡     â”‚ â”‚ æ•°æ®åº“æŒ‡æ ‡   â”‚ â”‚ ä¸šåŠ¡æŒ‡æ ‡     â”‚     â”‚   â”‚
â”‚  â”‚  â”‚   æ”¶é›†å™¨     â”‚ â”‚   æ”¶é›†å™¨     â”‚ â”‚   æ”¶é›†å™¨     â”‚ â”‚   æ”¶é›†å™¨     â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚         â”‚               â”‚               â”‚               â”‚             â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚                         â†“               â†“                           â”‚   â”‚
â”‚  â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚   â”‚
â”‚  â”‚                   â”‚ Micrometer   â”‚ â”‚ JMX Exporterâ”‚                     â”‚   â”‚
â”‚  â”‚                   â”‚   Metrics    â”‚ â”‚             â”‚                     â”‚   â”‚
â”‚  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        æ•°æ®å­˜å‚¨å±‚                                   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ Prometheus  â”‚ â”‚ InfluxDB    â”‚ â”‚ Elasticsearchâ”‚ â”‚ æ—¶åºæ•°æ®åº“   â”‚     â”‚   â”‚
â”‚  â”‚  â”‚   Server    â”‚ â”‚   (å¯é€‰)    â”‚ â”‚   (æ—¥å¿—)     â”‚ â”‚             â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        æ•°æ®å¤„ç†å±‚                                   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ èšåˆè®¡ç®—     â”‚ â”‚ å¼‚å¸¸æ£€æµ‹     â”‚ â”‚ è¶‹åŠ¿åˆ†æ     â”‚ â”‚ é¢„æµ‹åˆ†æ     â”‚     â”‚   â”‚
â”‚  â”‚  â”‚   å¼•æ“       â”‚ â”‚   ç®—æ³•       â”‚ â”‚   æ¨¡å‹       â”‚ â”‚   æ¨¡å‹       â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        å¯è§†åŒ–å±•ç¤ºå±‚                                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ Grafana     â”‚ â”‚ è‡ªå®šä¹‰       â”‚ â”‚ ç§»åŠ¨ç«¯       â”‚ â”‚ å¤§å±å±•ç¤º     â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  ä»ªè¡¨æ¿     â”‚ â”‚   ä»ªè¡¨æ¿     â”‚ â”‚   åº”ç”¨       â”‚ â”‚   ç³»ç»Ÿ       â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        å‘Šè­¦é€šçŸ¥å±‚                                   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ AlertManagerâ”‚ â”‚ PagerDuty   â”‚ â”‚ é’‰é’‰/é£ä¹¦   â”‚ â”‚ é‚®ä»¶/çŸ­ä¿¡    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚   å‘Šè­¦ç®¡ç†   â”‚ â”‚   å€¼ç­ç®¡ç†   â”‚ â”‚   å³æ—¶é€šè®¯   â”‚ â”‚   ä¼ ç»Ÿé€šçŸ¥   â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç›‘æ§ç»„ä»¶

#### 1. Prometheusï¼ˆæŒ‡æ ‡æ”¶é›†å’Œå­˜å‚¨ï¼‰
- **åŠŸèƒ½**ï¼šæ—¶åºæ•°æ®æ”¶é›†ã€å­˜å‚¨ã€æŸ¥è¯¢
- **ä¼˜åŠ¿**ï¼šå¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€PromQLã€ç”Ÿæ€ç³»ç»Ÿå®Œå–„
- **é…ç½®**ï¼šçµæ´»çš„æœåŠ¡å‘ç°å’ŒæŠ“å–é…ç½®

#### 2. Grafanaï¼ˆå¯è§†åŒ–å±•ç¤ºï¼‰
- **åŠŸèƒ½**ï¼šä»ªè¡¨æ¿åˆ›å»ºã€å›¾è¡¨å±•ç¤ºã€å‘Šè­¦é…ç½®
- **ä¼˜åŠ¿**ï¼šä¸°å¯Œçš„å›¾è¡¨ç±»å‹ã€ç¾è§‚çš„ç•Œé¢ã€çµæ´»çš„é…ç½®

#### 3. AlertManagerï¼ˆå‘Šè­¦ç®¡ç†ï¼‰
- **åŠŸèƒ½**ï¼šå‘Šè­¦è·¯ç”±ã€åˆ†ç»„ã€æŠ‘åˆ¶ã€é€šçŸ¥
- **ä¼˜åŠ¿**ï¼šæ™ºèƒ½å‘Šè­¦å¤„ç†ã€å¤šæ¸ é“é€šçŸ¥ã€æ•…éšœå‡çº§

#### 4. Node Exporterï¼ˆç³»ç»ŸæŒ‡æ ‡ï¼‰
- **åŠŸèƒ½**ï¼šä¸»æœºçº§ç³»ç»ŸæŒ‡æ ‡æ”¶é›†
- **æŒ‡æ ‡**ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿ

## æ ¸å¿ƒç›‘æ§æŒ‡æ ‡ä½“ç³»

### 1. åº”ç”¨å±‚æŒ‡æ ‡

#### éªŒè¯æ‰§è¡ŒæŒ‡æ ‡
```yaml
# éªŒè¯æ‰§è¡Œç»Ÿè®¡
verification_executions_total:
  description: "éªŒè¯æ‰§è¡Œæ€»æ•°"
  labels: [status, module, execution_type]
  type: counter

# éªŒè¯æ‰§è¡Œæ—¶é•¿
verification_execution_duration_seconds:
  description: "éªŒè¯æ‰§è¡Œæ—¶é•¿"
  labels: [module, script_name]
  type: histogram
  buckets: [1, 5, 10, 30, 60, 120, 300, 600]

# éªŒè¯å¥åº·è¯„åˆ†
verification_health_score:
  description: "éªŒè¯å¥åº·è¯„åˆ†"
  labels: [module, execution_id]
  type: gauge

# éªŒè¯é—®é¢˜æ•°é‡
verification_issues_total:
  description: "éªŒè¯é—®é¢˜æ•°é‡"
  labels: [severity, module, issue_type]
  type: counter
```

#### ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
```yaml
# JVMå†…å­˜ä½¿ç”¨
jvm_memory_used_bytes:
  description: "JVMå†…å­˜ä½¿ç”¨é‡"
  labels: [area, pool]
  type: gauge

# JVMçº¿ç¨‹æ•°é‡
jvm_threads_live_threads:
  description: "æ´»è·ƒçº¿ç¨‹æ•°"
  type: gauge

# åƒåœ¾å›æ”¶ç»Ÿè®¡
jvm_gc_collection_seconds_total:
  description: "GCè€—æ—¶ç»Ÿè®¡"
  labels: [gc, action]
  type: counter

# HTTPè¯·æ±‚ç»Ÿè®¡
http_requests_total:
  description: "HTTPè¯·æ±‚æ€»æ•°"
  labels: [method, status, handler]
  type: counter
```

#### ä¸šåŠ¡é€»è¾‘æŒ‡æ ‡
```yaml
# æ•°æ®åº“è¿æ¥çŠ¶æ€
database_connection_status:
  description: "æ•°æ®åº“è¿æ¥çŠ¶æ€"
  labels: [database]
  type: gauge

# è„šæœ¬å‘ç°æ•°é‡
verification_scripts_discovered_total:
  description: "å‘ç°çš„éªŒè¯è„šæœ¬æ•°é‡"
  labels: [module, status]
  type: gauge

# å¹¶å‘æ‰§è¡Œç»Ÿè®¡
verification_concurrent_executions:
  description: "å½“å‰å¹¶å‘æ‰§è¡Œæ•°é‡"
  type: gauge
```

### 2. æ•°æ®åº“å±‚æŒ‡æ ‡

#### MySQLæ€§èƒ½æŒ‡æ ‡
```yaml
# è¿æ¥æ•°
mysql_global_status_threads_connected:
  description: "å½“å‰è¿æ¥æ•°"
  type: gauge

# æŸ¥è¯¢ç»Ÿè®¡
mysql_global_status_queries:
  description: "æŸ¥è¯¢æ€»æ•°"
  type: counter

# æ…¢æŸ¥è¯¢ç»Ÿè®¡
mysql_global_status_slow_queries:
  description: "æ…¢æŸ¥è¯¢æ•°é‡"
  type: counter

# ç¼“å†²æ± ä½¿ç”¨ç‡
mysql_global_status_innodb_buffer_pool_pages_data:
  description: "ç¼“å†²æ± æ•°æ®é¡µæ•°"
  type: gauge
```

#### éªŒè¯ç³»ç»Ÿä¸“ç”¨æŒ‡æ ‡
```yaml
# éªŒè¯è¡¨å¤§å°
verification_table_size_bytes:
  description: "éªŒè¯è¡¨å¤§å°"
  labels: [table_name]
  type: gauge

# éªŒè¯æ‰§è¡Œå†å²ç»Ÿè®¡
verification_executions_by_type:
  description: "æŒ‰ç±»å‹ç»Ÿè®¡éªŒè¯æ‰§è¡Œ"
  labels: [execution_type, status]
  type: counter
```

### 3. ç³»ç»Ÿå±‚æŒ‡æ ‡

#### ä¸»æœºèµ„æºæŒ‡æ ‡
```yaml
# CPUä½¿ç”¨ç‡
node_cpu_seconds_total:
  description: "CPUä½¿ç”¨æ—¶é—´"
  labels: [cpu, mode]
  type: counter

# å†…å­˜ä½¿ç”¨ç‡
node_memory_MemAvailable_bytes:
  description: "å¯ç”¨å†…å­˜"
  type: gauge

# ç£ç›˜ä½¿ç”¨ç‡
node_filesystem_avail_bytes:
  description: "å¯ç”¨ç£ç›˜ç©ºé—´"
  labels: [device, mountpoint]
  type: gauge

# ç½‘ç»œæµé‡
node_network_receive_bytes_total:
  description: "ç½‘ç»œæ¥æ”¶å­—èŠ‚æ•°"
  labels: [device]
  type: counter
```

## å‘Šè­¦ç­–ç•¥è®¾è®¡

### å‘Šè­¦çº§åˆ«å®šä¹‰

#### Criticalï¼ˆä¸¥é‡ï¼‰- ğŸ”´
- **å“åº”æ—¶é—´**ï¼š5åˆ†é’Ÿå†…
- **å½±å“èŒƒå›´**ï¼šç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨
- **é€šçŸ¥æ–¹å¼**ï¼šç”µè¯ + çŸ­ä¿¡ + å³æ—¶é€šè®¯
- **å‡çº§æœºåˆ¶**ï¼š15åˆ†é’Ÿæ— å“åº”è‡ªåŠ¨å‡çº§

#### Warningï¼ˆè­¦å‘Šï¼‰- ğŸŸ¡
- **å“åº”æ—¶é—´**ï¼š30åˆ†é’Ÿå†…
- **å½±å“èŒƒå›´**ï¼šéƒ¨åˆ†åŠŸèƒ½å¼‚å¸¸
- **é€šçŸ¥æ–¹å¼**ï¼šé‚®ä»¶ + å³æ—¶é€šè®¯
- **å‡çº§æœºåˆ¶**ï¼š2å°æ—¶æ— å“åº”å‡çº§

#### Infoï¼ˆä¿¡æ¯ï¼‰- ğŸ”µ
- **å“åº”æ—¶é—´**ï¼šå·¥ä½œæ—¶é—´å“åº”
- **å½±å“èŒƒå›´**ï¼šæ€§èƒ½ä¸‹é™æˆ–é…ç½®é—®é¢˜
- **é€šçŸ¥æ–¹å¼**ï¼šé‚®ä»¶
- **å‡çº§æœºåˆ¶**ï¼šä¸å‡çº§

### æ ¸å¿ƒå‘Šè­¦è§„åˆ™

#### 1. æœåŠ¡å¯ç”¨æ€§å‘Šè­¦

```yaml
# æœåŠ¡ä¸å¯ç”¨å‘Šè­¦
- alert: VerificationServiceDown
  expr: up{job="knene-verification"} == 0
  for: 1m
  labels:
    severity: critical
    service: verification
  annotations:
    summary: "éªŒè¯ç³»ç»ŸæœåŠ¡ä¸å¯ç”¨"
    description: "éªŒè¯ç³»ç»ŸæœåŠ¡å·²åœæ­¢è¿è¡Œè¶…è¿‡1åˆ†é’Ÿ"
    runbook_url: "https://wiki.company.com/verification/troubleshooting"

# ç«¯å£ä¸å¯è®¿é—®å‘Šè­¦
- alert: VerificationPortUnreachable
  expr: probe_success{instance="verification:8080"} == 0
  for: 2m
  labels:
    severity: critical
    service: verification
  annotations:
    summary: "éªŒè¯ç³»ç»Ÿç«¯å£ä¸å¯è®¿é—®"
    description: "éªŒè¯ç³»ç»Ÿ8080ç«¯å£æ— æ³•è®¿é—®"
```

#### 2. æ€§èƒ½å‘Šè­¦

```yaml
# éªŒè¯æ‰§è¡Œå¤±è´¥ç‡è¿‡é«˜
- alert: HighVerificationFailureRate
  expr: |
    (
      rate(verification_executions_total{status="failed"}[5m]) /
      rate(verification_executions_total[5m])
    ) > 0.1
  for: 5m
  labels:
    severity: warning
    service: verification
  annotations:
    summary: "éªŒè¯å¤±è´¥ç‡è¿‡é«˜"
    description: "è¿‡å»5åˆ†é’Ÿå†…éªŒè¯å¤±è´¥ç‡ä¸º {{ $value | humanizePercentage }}"

# éªŒè¯æ‰§è¡Œè¶…æ—¶
- alert: VerificationExecutionTimeout
  expr: increase(verification_timeouts_total[5m]) > 0
  for: 2m
  labels:
    severity: warning
    service: verification
  annotations:
    summary: "æ£€æµ‹åˆ°éªŒè¯æ‰§è¡Œè¶…æ—¶"
    description: "è¿‡å»5åˆ†é’Ÿå†…æœ‰ {{ $value }} æ¬¡éªŒè¯æ‰§è¡Œè¶…æ—¶"

# å¥åº·è¯„åˆ†è¿‡ä½
- alert: LowHealthScore
  expr: avg(verification_health_score) < 70
  for: 10m
  labels:
    severity: warning
    service: verification
  annotations:
    summary: "æ•°æ®åº“å¥åº·è¯„åˆ†è¿‡ä½"
    description: "å½“å‰å¹³å‡å¥åº·è¯„åˆ†ä¸º {{ $value }}ï¼Œä½äº70åˆ†é˜ˆå€¼"
```

#### 3. èµ„æºä½¿ç”¨å‘Šè­¦

```yaml
# CPUä½¿ç”¨ç‡è¿‡é«˜
- alert: HighCPUUsage
  expr: 100 - (avg by(instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
  for: 5m
  labels:
    severity: warning
    service: system
  annotations:
    summary: "CPUä½¿ç”¨ç‡è¿‡é«˜"
    description: "å®ä¾‹ {{ $labels.instance }} CPUä½¿ç”¨ç‡ä¸º {{ $value }}%"

# å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜
- alert: HighMemoryUsage
  expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100 > 85
  for: 5m
  labels:
    severity: warning
    service: system
  annotations:
    summary: "å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"
    description: "å®ä¾‹ {{ $labels.instance }} å†…å­˜ä½¿ç”¨ç‡ä¸º {{ $value }}%"

# ç£ç›˜ç©ºé—´ä¸è¶³
- alert: DiskSpaceLow
  expr: (node_filesystem_avail_bytes{mountpoint="/"} / node_filesystem_size_bytes{mountpoint="/"}) * 100 < 15
  for: 5m
  labels:
    severity: critical
    service: system
  annotations:
    summary: "ç£ç›˜ç©ºé—´ä¸è¶³"
    description: "å®ä¾‹ {{ $labels.instance }} æ ¹åˆ†åŒºå‰©ä½™ç©ºé—´ä¸º {{ $value }}%"
```

#### 4. æ•°æ®åº“å‘Šè­¦

```yaml
# æ•°æ®åº“è¿æ¥å¤±è´¥
- alert: DatabaseConnectionFailed
  expr: database_connection_status{database="knene_verification"} == 0
  for: 2m
  labels:
    severity: critical
    service: database
  annotations:
    summary: "æ•°æ®åº“è¿æ¥å¤±è´¥"
    description: "æ— æ³•è¿æ¥åˆ°knene_verificationæ•°æ®åº“"

# æ…¢æŸ¥è¯¢å¢å¤š
- alert: SlowQueriesIncreasing
  expr: rate(mysql_global_status_slow_queries[5m]) > 0.1
  for: 5m
  labels:
    severity: warning
    service: database
  annotations:
    summary: "æ…¢æŸ¥è¯¢æ•°é‡å¢åŠ "
    description: "è¿‡å»5åˆ†é’Ÿå†…æ…¢æŸ¥è¯¢å¢é•¿ç‡ä¸º {{ $value }} queries/second"

# æ•°æ®åº“è¿æ¥æ•°è¿‡é«˜
- alert: HighDatabaseConnections
  expr: mysql_global_status_threads_connected > 80
  for: 5m
  labels:
    severity: warning
    service: database
  annotations:
    summary: "æ•°æ®åº“è¿æ¥æ•°è¿‡é«˜"
    description: "å½“å‰æ•°æ®åº“è¿æ¥æ•°ä¸º {{ $value }}ï¼Œè¶…è¿‡é˜ˆå€¼80"
```

### æ™ºèƒ½å‘Šè­¦è§„åˆ™

#### è¶‹åŠ¿æ£€æµ‹å‘Šè­¦

```yaml
# å¥åº·è¯„åˆ†æŒç»­ä¸‹é™
- alert: HealthScoreDeclining
  expr: |
    (
      predict_linear(verification_health_score[6h], 3600) < 70
      and verification_health_score < 80
    )
  for: 10m
  labels:
    severity: warning
    service: verification
  annotations:
    summary: "å¥åº·è¯„åˆ†æŒç»­ä¸‹é™"
    description: "åŸºäºå½“å‰è¶‹åŠ¿ï¼Œé¢„è®¡1å°æ—¶åå¥åº·è¯„åˆ†å°†ä½äº70åˆ†"

# æ‰§è¡Œæ—¶é—´å¢é•¿è¶‹åŠ¿
- alert: ExecutionTimeIncreasing
  expr: |
    (
      predict_linear(avg(verification_execution_duration_seconds)[2h], 3600) >
      avg(verification_execution_duration_seconds) * 1.5
    )
  for: 15m
  labels:
    severity: warning
    service: verification
  annotations:
    summary: "éªŒè¯æ‰§è¡Œæ—¶é—´å‘ˆå¢é•¿è¶‹åŠ¿"
    description: "é¢„è®¡1å°æ—¶åå¹³å‡æ‰§è¡Œæ—¶é—´å°†å¢é•¿50%ä»¥ä¸Š"
```

#### å¼‚å¸¸æ£€æµ‹å‘Šè­¦

```yaml
# å¼‚å¸¸å¤±è´¥ç‡æ£€æµ‹
- alert: AnomalousFailureRate
  expr: |
    (
      rate(verification_executions_total{status="failed"}[5m]) >
      (
        avg_over_time(rate(verification_executions_total{status="failed"}[5m])[24h:1h]) +
        2 * stddev_over_time(rate(verification_executions_total{status="failed"}[5m])[24h:1h])
      )
    )
  for: 5m
  labels:
    severity: warning
    service: verification
  annotations:
    summary: "æ£€æµ‹åˆ°å¼‚å¸¸å¤±è´¥ç‡"
    description: "å½“å‰å¤±è´¥ç‡ {{ $value | humanizePercentage }} è¶…è¿‡æ­£å¸¸èŒƒå›´"

# æ‰§è¡Œé‡å¼‚å¸¸ä¸‹é™
- alert: UnusualLowExecutionVolume
  expr: |
    (
      rate(verification_executions_total[5m]) <
      (
        avg_over_time(rate(verification_executions_total[5m])[24h:1h]) -
        2 * stddev_over_time(rate(verification_executions_total[5m])[24h:1h])
      )
    )
  for: 10m
  labels:
    severity: info
    service: verification
  annotations:
    summary: "éªŒè¯æ‰§è¡Œé‡å¼‚å¸¸ä¸‹é™"
    description: "å½“å‰æ‰§è¡Œé‡ {{ $value }} ä½äºæ­£å¸¸æ°´å¹³"
```

## ä»ªè¡¨æ¿è®¾è®¡

### 1. ç³»ç»Ÿæ¦‚è§ˆä»ªè¡¨æ¿

#### æ ¸å¿ƒæŒ‡æ ‡å±•ç¤º
```json
{
  "dashboard": {
    "title": "éªŒè¯ç³»ç»Ÿæ¦‚è§ˆ",
    "panels": [
      {
        "title": "ç³»ç»ŸçŠ¶æ€",
        "type": "stat",
        "targets": [
          {
            "expr": "up{job=\"knene-verification\"}",
            "legendFormat": "{{instance}}"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {"options": {"0": {"text": "DOWN", "color": "red"}}},
              {"options": {"1": {"text": "UP", "color": "green"}}}
            ]
          }
        }
      },
      {
        "title": "å½“å‰å¥åº·è¯„åˆ†",
        "type": "stat",
        "targets": [
          {
            "expr": "avg(verification_health_score)",
            "legendFormat": "å¥åº·è¯„åˆ†"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "thresholds": {
              "steps": [
                {"color": "red", "value": 0},
                {"color": "yellow", "value": 70},
                {"color": "green", "value": 80}
              ]
            }
          }
        }
      },
      {
        "title": "éªŒè¯æ‰§è¡Œè¶‹åŠ¿",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(verification_executions_total[5m])",
            "legendFormat": "æ‰§è¡Œé¢‘ç‡"
          },
          {
            "expr": "rate(verification_executions_total{status=\"failed\"}[5m])",
            "legendFormat": "å¤±è´¥é¢‘ç‡"
          }
        ]
      },
      {
        "title": "æ‰§è¡Œæ—¶é•¿åˆ†å¸ƒ",
        "type": "heatmap",
        "targets": [
          {
            "expr": "rate(verification_execution_duration_seconds_bucket[5m])",
            "legendFormat": "{{le}}"
          }
        ]
      }
    ]
  }
}
```

### 2. æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿

#### JVMæ€§èƒ½ç›‘æ§
```json
{
  "panels": [
    {
      "title": "JVMå†…å­˜ä½¿ç”¨",
      "type": "graph",
      "targets": [
        {
          "expr": "jvm_memory_used_bytes{area=\"heap\"}",
          "legendFormat": "å †å†…å­˜ä½¿ç”¨"
        },
        {
          "expr": "jvm_memory_max_bytes{area=\"heap\"}",
          "legendFormat": "å †å†…å­˜æœ€å¤§"
        }
      ]
    },
    {
      "title": "GCæ´»åŠ¨",
      "type": "graph",
      "targets": [
        {
          "expr": "rate(jvm_gc_collection_seconds_total[5m])",
          "legendFormat": "{{gc}}-{{action}}"
        }
      ]
    },
    {
      "title": "çº¿ç¨‹æ•°é‡",
      "type": "graph",
      "targets": [
        {
          "expr": "jvm_threads_live_threads",
          "legendFormat": "æ´»è·ƒçº¿ç¨‹"
        },
        {
          "expr": "jvm_threads_daemon_threads",
          "legendFormat": "å®ˆæŠ¤çº¿ç¨‹"
        }
      ]
    }
  ]
}
```

### 3. ä¸šåŠ¡ç›‘æ§ä»ªè¡¨æ¿

#### éªŒè¯ç»“æœåˆ†æ
```json
{
  "panels": [
    {
      "title": "å„æ¨¡å—å¥åº·è¯„åˆ†",
      "type": "graph",
      "targets": [
        {
          "expr": "avg by (module) (verification_health_score)",
          "legendFormat": "{{module}}"
        }
      ]
    },
    {
      "title": "é—®é¢˜ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ",
      "type": "piechart",
      "targets": [
        {
          "expr": "sum by (severity) (verification_issues_total)",
          "legendFormat": "{{severity}}"
        }
      ]
    },
    {
      "title": "éªŒè¯æ‰§è¡ŒæˆåŠŸç‡",
      "type": "stat",
      "targets": [
        {
          "expr": "rate(verification_executions_total{status=\"success\"}[5m]) / rate(verification_executions_total[5m]) * 100",
          "legendFormat": "æˆåŠŸç‡"
        }
      ]
    }
  ]
}
```

## å‘Šè­¦é€šçŸ¥é…ç½®

### 1. AlertManageré…ç½®

```yaml
# alertmanager.yml
global:
  smtp_smarthost: 'smtp.company.com:587'
  smtp_from: 'alerts@company.com'
  smtp_auth_username: 'alerts@company.com'
  smtp_auth_password: 'password'

# è·¯ç”±é…ç½®
route:
  group_by: ['alertname', 'service']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'default'
  routes:
    # ä¸¥é‡å‘Šè­¦ç«‹å³é€šçŸ¥
    - match:
        severity: critical
      receiver: 'critical-alerts'
      group_wait: 0s
      repeat_interval: 5m

    # è­¦å‘Šçº§åˆ«å‘Šè­¦
    - match:
        severity: warning
      receiver: 'warning-alerts'
      group_wait: 30s
      repeat_interval: 30m

    # æ•°æ®åº“å‘Šè­¦
    - match:
        service: database
      receiver: 'database-alerts'

# æ¥æ”¶å™¨é…ç½®
receivers:
  # é»˜è®¤æ¥æ”¶å™¨
  - name: 'default'
    email_configs:
      - to: 'team@company.com'
        subject: '[{{ .Status | toUpper }}] {{ .GroupLabels.alertname }}'
        body: |
          {{ range .Alerts }}
          å‘Šè­¦åç§°: {{ .Annotations.summary }}
          å‘Šè­¦æè¿°: {{ .Annotations.description }}
          å¼€å§‹æ—¶é—´: {{ .StartsAt }}
          {{ end }}

  # ä¸¥é‡å‘Šè­¦æ¥æ”¶å™¨
  - name: 'critical-alerts'
    email_configs:
      - to: 'oncall@company.com'
        subject: '[CRITICAL] {{ .GroupLabels.alertname }}'
    webhook_configs:
      - url: 'https://api.pagerduty.com/incidents'
        send_resolved: true

  # è­¦å‘Šå‘Šè­¦æ¥æ”¶å™¨
  - name: 'warning-alerts'
    email_configs:
      - to: 'dev-team@company.com'
    slack_configs:
      - api_url: 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK'
        channel: '#verification-alerts'
        title: 'Warning: {{ .GroupLabels.alertname }}'
        text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'

  # æ•°æ®åº“å‘Šè­¦æ¥æ”¶å™¨
  - name: 'database-alerts'
    email_configs:
      - to: 'dba-team@company.com'
    webhook_configs:
      - url: 'http://dingtalk-webhook:8080/webhook'
        send_resolved: true

# æŠ‘åˆ¶è§„åˆ™
inhibit_rules:
  # å¦‚æœæœåŠ¡ä¸å¯ç”¨ï¼ŒæŠ‘åˆ¶è¯¥æœåŠ¡çš„å…¶ä»–å‘Šè­¦
  - source_match:
      alertname: 'VerificationServiceDown'
    target_match_re:
      service: 'verification'
    equal: ['instance']
```

### 2. é‚®ä»¶æ¨¡æ¿é…ç½®

```html
<!-- email_template.html -->
<!DOCTYPE html>
<html>
<head>
    <title>{{ .Status | toUpper }} - éªŒè¯ç³»ç»Ÿå‘Šè­¦</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .critical { color: #d32f2f; }
        .warning { color: #f57c00; }
        .info { color: #1976d2; }
        .resolved { color: #388e3c; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h2 class="{{ .Status | toLower }}">
        {{ .Status | toUpper }} - éªŒè¯ç³»ç»Ÿå‘Šè­¦
    </h2>

    <p><strong>è§¦å‘æ—¶é—´:</strong> {{ .Alerts.FiredAt }}</p>
    <p><strong>å‘Šè­¦æ•°é‡:</strong> {{ len .Alerts }}</p>

    <table>
        <tr>
            <th>å‘Šè­¦åç§°</th>
            <th>ä¸¥é‡ç¨‹åº¦</th>
            <th>æè¿°</th>
            <th>å¼€å§‹æ—¶é—´</th>
        </tr>
        {{ range .Alerts }}
        <tr>
            <td>{{ .Labels.alertname }}</td>
            <td class="{{ .Labels.severity }}">{{ .Labels.severity | toUpper }}</td>
            <td>{{ .Annotations.description }}</td>
            <td>{{ .StartsAt }}</td>
        </tr>
        {{ end }}
    </table>

    {{ if .GroupLabels.runbook_url }}
    <p><strong>æ“ä½œæ‰‹å†Œ:</strong> <a href="{{ .GroupLabels.runbook_url }}">ç‚¹å‡»æŸ¥çœ‹</a></p>
    {{ end }}

    <hr>
    <p><small>æ­¤é‚®ä»¶ç”±KNENEéªŒè¯ç³»ç»Ÿè‡ªåŠ¨å‘é€</small></p>
</body>
</html>
```

### 3. Slacké€šçŸ¥é…ç½®

```yaml
# slack_config.yml
slack_configs:
  - api_url: 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK'
    channel: '#verification-alerts'
    title: 'éªŒè¯ç³»ç»Ÿå‘Šè­¦: {{ .GroupLabels.alertname }}'
    text: |
      {{ range .Alerts }}
      *å‘Šè­¦åç§°*: {{ .Labels.alertname }}
      *ä¸¥é‡ç¨‹åº¦*: {{ .Labels.severity | toUpper }}
      *æè¿°*: {{ .Annotations.description }}
      *å¼€å§‹æ—¶é—´*: {{ .StartsAt }}
      {{ end }}
    send_resolved: true
    icon_emoji: ':warning:'
    username: 'KNENE Verification Bot'
```

## ç›‘æ§æœ€ä½³å®è·µ

### 1. æŒ‡æ ‡è®¾è®¡åŸåˆ™

#### GOLDæŒ‡æ ‡ä½“ç³»
- **Latencyï¼ˆå»¶è¿Ÿï¼‰**ï¼šè¯·æ±‚å“åº”æ—¶é—´
- **Errorsï¼ˆé”™è¯¯ç‡ï¼‰**ï¼šè¯·æ±‚å¤±è´¥æ¯”ä¾‹
- **Availabilityï¼ˆå¯ç”¨æ€§ï¼‰**ï¼šæœåŠ¡å¯ç”¨æ—¶é—´
- **Durabilityï¼ˆæŒä¹…æ€§ï¼‰**ï¼šæ•°æ®æŒä¹…æ€§ä¿éšœ

#### USEæŒ‡æ ‡ä½“ç³»
- **Utilizationï¼ˆä½¿ç”¨ç‡ï¼‰**ï¼šèµ„æºä½¿ç”¨ç™¾åˆ†æ¯”
- **Saturationï¼ˆé¥±å’Œåº¦ï¼‰**ï¼šèµ„æºç¹å¿™ç¨‹åº¦
- **Errorsï¼ˆé”™è¯¯ï¼‰**ï¼šé”™è¯¯è®¡æ•°

### 2. å‘Šè­¦è®¾è®¡åŸåˆ™

#### å‘Šè­¦é»„é‡‘æ³•åˆ™
1. **å¯è¡ŒåŠ¨æ€§**ï¼šæ¯ä¸ªå‘Šè­¦éƒ½åº”è¯¥æœ‰æ˜ç¡®çš„è¡ŒåŠ¨
2. **å¯ç†è§£æ€§**ï¼šå‘Šè­¦ä¿¡æ¯åº”è¯¥æ¸…æ™°æ˜“æ‡‚
3. **åŠæ—¶æ€§**ï¼šåœ¨é—®é¢˜æ¶åŒ–å‰åŠæ—¶é€šçŸ¥
4. **å‡†ç¡®æ€§**ï¼šå‡å°‘è¯¯æŠ¥å’Œæ¼æŠ¥

#### å‘Šè­¦åˆ†çº§ç­–ç•¥
```yaml
# å‘Šè­¦åˆ†çº§çŸ©é˜µ
severity_matrix:
  critical:
    impact: "ä¸šåŠ¡å®Œå…¨ä¸­æ–­"
    urgency: "ç«‹å³å¤„ç†"
    notification: ["phone", "sms", "slack", "email"]
    response_time: "5åˆ†é’Ÿ"

  warning:
    impact: "éƒ¨åˆ†åŠŸèƒ½å¼‚å¸¸"
    urgency: "å·¥ä½œæ—¶é—´å¤„ç†"
    notification: ["slack", "email"]
    response_time: "30åˆ†é’Ÿ"

  info:
    impact: "æ€§èƒ½ä¸‹é™"
    urgency: "å¯å»¶åå¤„ç†"
    notification: ["email"]
    response_time: "4å°æ—¶"
```

### 3. ä»ªè¡¨æ¿è®¾è®¡åŸåˆ™

#### ä»ªè¡¨æ¿åˆ†å±‚è®¾è®¡
1. **æˆ˜ç•¥å±‚ä»ªè¡¨æ¿**ï¼šé«˜å±‚é¢†å¯¼å…³æ³¨çš„æ ¸å¿ƒæŒ‡æ ‡
2. **æˆ˜æœ¯å±‚ä»ªè¡¨æ¿**ï¼šå›¢é˜Ÿå…³æ³¨çš„æ€§èƒ½å’Œå¯ç”¨æ€§æŒ‡æ ‡
3. **æ“ä½œå±‚ä»ªè¡¨æ¿**ï¼šè¿ç»´äººå‘˜å…³æ³¨çš„è¯¦ç»†æŠ€æœ¯æŒ‡æ ‡

#### ä»ªè¡¨æ¿è®¾è®¡æœ€ä½³å®è·µ
- ä½¿ç”¨ç»Ÿä¸€çš„é¢œè‰²è§„èŒƒ
- åˆç†çš„å›¾è¡¨å¸ƒå±€å’Œå¯†åº¦
- æ¸…æ™°çš„æ ‡é¢˜å’Œæ ‡ç­¾
- é€‚å½“çš„æ—¶é—´èŒƒå›´é€‰æ‹©
- å…³é”®æŒ‡æ ‡çš„çªå‡ºæ˜¾ç¤º

## ç›‘æ§ç³»ç»Ÿéƒ¨ç½²

### 1. Prometheuséƒ¨ç½²é…ç½®

```yaml
# prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "rules/*.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093

scrape_configs:
  # éªŒè¯ç³»ç»Ÿç›‘æ§
  - job_name: 'knene-verification'
    static_configs:
      - targets: ['verification:8080']
    metrics_path: '/actuator/prometheus'
    scrape_interval: 30s

  # ä¸»æœºç›‘æ§
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']

  # MySQLç›‘æ§
  - job_name: 'mysql-exporter'
    static_configs:
      - targets: ['mysql-exporter:9104']
```

### 2. Grafanaéƒ¨ç½²é…ç½®

```yaml
# grafana-deployment.yml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: grafana
spec:
  replicas: 1
  selector:
    matchLabels:
      app: grafana
  template:
    metadata:
      labels:
        app: grafana
    spec:
      containers:
      - name: grafana
        image: grafana/grafana:latest
        ports:
        - containerPort: 3000
        env:
        - name: GF_SECURITY_ADMIN_PASSWORD
          value: "admin_password"
        volumeMounts:
        - name: grafana-storage
          mountPath: /var/lib/grafana
        - name: grafana-config
          mountPath: /etc/grafana/provisioning
      volumes:
      - name: grafana-storage
        persistentVolumeClaim:
          claimName: grafana-pvc
      - name: grafana-config
        configMap:
          name: grafana-config
```

### 3. Docker Composeéƒ¨ç½²

```yaml
# docker-compose.monitoring.yml
version: '3.8'

services:
  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
      - ./rules:/etc/prometheus/rules
      - prometheus_data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/etc/prometheus/console_libraries'
      - '--web.console.templates=/etc/prometheus/consoles'
      - '--storage.tsdb.retention.time=200h'
      - '--web.enable-lifecycle'

  alertmanager:
    image: prom/alertmanager:latest
    container_name: alertmanager
    ports:
      - "9093:9093"
    volumes:
      - ./alertmanager.yml:/etc/alertmanager/alertmanager.yml
      - alertmanager_data:/alertmanager

  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    ports:
      - "3000:3000"
    volumes:
      - grafana_data:/var/lib/grafana
      - ./grafana/provisioning:/etc/grafana/provisioning
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
      - GF_USERS_ALLOW_SIGN_UP=false

  node-exporter:
    image: prom/node-exporter:latest
    container_name: node-exporter
    ports:
      - "9100:9100"
    volumes:
      - /proc:/host/proc:ro
      - /sys:/host/sys:ro
      - /:/rootfs:ro
    command:
      - '--path.procfs=/host/proc'
      - '--path.rootfs=/rootfs'
      - '--path.sysfs=/host/sys'
      - '--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)'

volumes:
  prometheus_data:
  alertmanager_data:
  grafana_data:
```

## æ€»ç»“

æ•°æ®åº“éªŒè¯ç³»ç»Ÿçš„ç›‘æ§å‘Šè­¦ä½“ç³»æ˜¯ä¿éšœç³»ç»Ÿç¨³å®šè¿è¡Œçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚é€šè¿‡å»ºç«‹å®Œå–„çš„ç›‘æ§æ¶æ„ã€è®¾è®¡åˆç†çš„å‘Šè­¦ç­–ç•¥ã€æ„å»ºç›´è§‚çš„ä»ªè¡¨æ¿ï¼Œå¯ä»¥ï¼š

1. **åŠæ—¶å‘ç°é—®é¢˜**ï¼šé€šè¿‡å®æ—¶ç›‘æ§å’Œæ™ºèƒ½å‘Šè­¦ï¼Œåœ¨é—®é¢˜å½±å“ä¸šåŠ¡å‰åŠæ—¶å‘ç°
2. **å¿«é€Ÿå®šä½æ•…éšœ**ï¼šé€šè¿‡ä¸°å¯Œçš„æŒ‡æ ‡ä¿¡æ¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜æ ¹å› 
3. **ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½**ï¼šé€šè¿‡æ€§èƒ½è¶‹åŠ¿åˆ†æï¼ŒæŒç»­ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
4. **æå‡è¿ç»´æ•ˆç‡**ï¼šé€šè¿‡è‡ªåŠ¨åŒ–å‘Šè­¦å’Œæ ‡å‡†åŒ–æµç¨‹ï¼Œæå‡è¿ç»´æ•ˆç‡

å»ºè®®å®šæœŸå›é¡¾å’Œä¼˜åŒ–ç›‘æ§å‘Šè­¦é…ç½®ï¼Œç¡®ä¿ç›‘æ§ä½“ç³»èƒ½å¤Ÿé€‚åº”ä¸šåŠ¡å‘å±•å’ŒæŠ€æœ¯å˜åŒ–ï¼Œä¸ºç³»ç»Ÿç¨³å®šè¿è¡Œæä¾›æœ‰åŠ›ä¿éšœã€‚