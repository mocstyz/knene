# 开发检查清单

## 📋 项目开发流程检查清单

本文档提供影视资源下载网站项目各开发阶段的检查要点，确保开发质量和效率。

---

## 🏗️ 1.1 数据库架构规范制定阶段

### 1.1.1 数据库架构规范制定
- [ ] **表结构设计规范**
  - [ ] 制定统一的表命名规范（小写字母+下划线）
  - [ ] 定义通用字段标准（id、created_at、updated_at、deleted_at）
  - [ ] 确定字段类型规范和长度标准
  - [ ] 建立字段约束规范（NOT NULL、DEFAULT、CHECK等）

- [ ] **索引设计指导原则**
  - [ ] 制定主键索引策略（推荐使用自增ID）
  - [ ] 定义唯一索引设计规范
  - [ ] 建立复合索引设计原则
  - [ ] 确定索引字段顺序规则

- [ ] **数据库版本管理**
  - [ ] 制定Flyway迁移脚本规范
  - [ ] 确定版本号命名规则（V{序号}__{描述}.sql）
  - [ ] 建立回滚策略制定
  - [ ] 配置数据库变更检查

- [ ] **数据完整性规范**
  - [ ] 定义外键约束设计规范
  - [ ] 建立数据一致性检查规则
  - [ ] 制定数据清理策略
  - [ ] 配置数据验证规则

---

## 🔧 环境配置检查

### 开发环境
- [ ] **基础环境**
  - [ ] Java 21 环境配置正确
  - [ ] Maven 3.6+ 环境可用
  - [ ] Git 配置完成
  - [ ] IDE 开发环境配置

- [ ] **数据库环境**
  - [ ] MySQL 8.0 服务运行正常
  - [ ] Redis 7.x 服务运行正常
  - [ ] 数据库连接配置正确
  - [ ] 测试数据库创建完成

- [ ] **开发工具**
  - [ ] 代码格式化工具配置
  - [ ] 静态代码分析工具配置
  - [ ] Git hooks 配置
  - [ ] Docker 环境可用

---

## 📝 编码规范检查

### 代码质量
- [ ] **命名规范**
  - [ ] 类名使用大驼峰命名法
  - [ ] 方法名和变量名使用小驼峰命名法
  - [ ] 常量使用全大写+下划线
  - [ ] 包名使用全小写+点号分隔

- [ ] **注释规范**
  - [ ] 所有文件顶部使用 javavadoc 格式注释
  - [ ] 类和方法使用 // 单行注释
  - [ ] 复杂业务流程使用数字编号标注
  - [ ] 注释不超过3行（文件头除外）

- [ ] **代码结构**
  - [ ] 遵循 DDD 分层架构
  - [ ] 依赖注入使用 @Component 注解
  - [ ] 业务逻辑封装在 Service 层
  - [ ] 数据访问使用 Repository 模式

### 异常处理
- [ ] **异常定义**
  - [ ] 定义业务异常类层次结构
  - [ ] 实现全局异常处理器
  - [ ] 错误码系统实现
  - [ ] 异常日志记录配置

- [ ] **错误处理**
  - [ ] 统一响应格式定义
  - [ ] 参数验证注解使用
  - [ ] 安全敏感信息过滤
  - [ ] 错误信息国际化支持

---

## 🧪 测试规范检查

### 测试覆盖
- [ ] **单元测试**
  - [ ] 核心业务逻辑测试覆盖率 ≥ 90%
  - [ ] 测试方法名清晰描述测试场景
  - [ ] 使用 Instancio 生成测试数据
  - [ ] Mock 外部依赖

- [ ] **集成测试**
  - [ ] API 接口功能测试
  - [ ] 数据库操作测试
  - [ ] 缓存功能测试
  - [ ] 异常场景测试

### 测试数据
- [ ] **数据质量**
  - [ ] 测试数据符合 Bean Validation 约束
  - [ ] 关联数据保持完整性和一致性
  - [ ] 敏感数据进行脱敏处理
  - [ ] 批量数据生成性能检查

---

## 🔒 安全规范检查

### 认证授权
- [ ] **密码安全**
  - [ ] 使用 BCrypt 进行密码加密
  - [ ] 密码强度验证实现
  - [ ] 密码历史管理
  - [ ] 密码重置流程安全

- [ ] **JWT 认证**
  - [ ] Token 生成和验证实现
  - [ ] Token 过期和刷新机制
  - [ ] 安全密钥管理
  - [ ] Token 存储安全

### 数据安全
- [ ] **输入验证**
  - [ ] 所有用户输入严格验证
  - [ ] SQL 注入防护实现
  - [ ] XSS 攻击防护
  - [ ] 文件上传安全检查

- [ ] **数据保护**
  - [ ] 敏感数据加密存储
  - [ ] 数据传输加密
  - [ ] 日志敏感信息过滤
  - [ ] 数据访问权限控制

---

## 📊 性能规范检查

### 数据库性能
- [ ] **查询优化**
  - [ ] 避免 SELECT * 查询
  - [ ] 合理使用索引
  - [ ] 慢查询分析和优化
  - [ ] 批量操作优化

- [ ] **连接管理**
  - [ ] 连接池配置优化
  - [ ] 连接泄漏检查
  - [ ] 事务粒度控制
  - [ ] 死锁检测和处理

### 缓存策略
- [ ] **多级缓存**
  - [ ] 本地缓存（Caffeine）配置
  - [ ] 分布式缓存（Redis）配置
  - [ ] 缓存一致性策略
  - [ ] 缓存穿透/雪崩防护

- [ ] **缓存优化**
  - [ ] 缓存命中率监控
  - [ ] TTL 过期策略
  - [ ] 热点数据识别
  - [ ] 缓存预热机制

---

## 🚀 部署规范检查

### 配置管理
- [ ] **环境配置**
  - [ ] 多环境配置文件分离
  - [ ] 敏感信息使用环境变量
  - [ ] 配置验证和错误处理
  - [ ] 配置热更新支持

- [ ] **容器化**
  - [ ] Dockerfile 优化
  - [ ] 多阶段构建使用
  - [ ] 健康检查配置
  - [ ] 镜像大小优化

### 监控运维
- [ ] **应用监控**
  - [ ] Spring Boot Actuator 配置
  - [ ] 关键指标监控
  - [ ] 健康检查端点
  - [ ] 性能监控配置

- [ ] **日志管理**
  - [ ] 结构化日志输出
  - [ ] 日志级别合理配置
  - [ ] 敏感信息过滤
  - [ ] 日志轮转配置

---

## ✅ 阶段完成检查

### 每个阶段完成后
- [ ] **功能验证**
  - [ ] 所有功能正常运行
  - [ ] 异常场景处理正确
  - [ ] 性能指标达标
  - [ ] 安全检查通过

- [ ] **文档更新**
  - [ ] 技术文档同步更新
  - [ ] API 文档生成完整
  - [ ] 部署文档更新
  - [ ] 变更日志记录

- [ ] **代码质量**
  - [ ] 代码审查完成
  - [ ] 测试覆盖率达标
  - [ ] 静态分析通过
  - [ ] 安全扫描无高危漏洞

---

**使用说明**：
- 📋 每个开发阶段完成后逐项检查
- ✅ 已完成项目标记 [x]
- ⚠️ 不适用项目标记 [-] 或删除
- 🔄 定期更新检查清单内容
- 📝 记录检查结果和改进措施