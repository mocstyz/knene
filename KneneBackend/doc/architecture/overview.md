# ç³»ç»Ÿæ¶æ„æ€»è§ˆ

## ğŸ—ï¸ æ¶æ„è®¾è®¡æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°å½±è§†èµ„æºä¸‹è½½ç½‘ç«™çš„æ€»ä½“æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æŠ€æœ¯é€‰å‹ã€æ¶æ„æ¨¡å¼ã€ç³»ç»Ÿåˆ†å±‚å’Œå…³é”®æŠ€æœ¯å†³ç­–ã€‚

---

## ğŸ¯ æ¶æ„è®¾è®¡åŸåˆ™

### 1. å•ä½“æ¶æ„ç°ä»£åŒ–
- **ç®€æ´æ€§ä¼˜å…ˆ**ï¼šé‡‡ç”¨å•ä½“æ¶æ„ï¼Œé¿å…å¾®æœåŠ¡å¤æ‚æ€§
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šé€šè¿‡æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œå®ç°é«˜å†…èšä½è€¦åˆ
- **ç°ä»£åŒ–å·¥å…·é“¾**ï¼šä½¿ç”¨æœ€æ–°çš„æŠ€æœ¯æ ˆå’Œå¼€å‘å·¥å…·
- **å¯æ¼”è¿›æ€§**ï¼šé¢„ç•™å¾®æœåŠ¡åŒ–æ”¹é€ ç©ºé—´

### 2. æŠ€æœ¯ä¾èµ–å…³ç³»ä¼˜å…ˆ
- **æ•°æ®åº“ä¼˜å…ˆ**ï¼šæ•°æ®å±‚å…ˆè¡Œï¼Œä¸ºä¸šåŠ¡åŠŸèƒ½æä¾›åŸºç¡€æ”¯æ’‘
- **é¢†åŸŸæ¨¡å‹é©±åŠ¨**ï¼šä»¥ä¸šåŠ¡é¢†åŸŸä¸ºæ ¸å¿ƒç»„ç»‡ä»£ç ç»“æ„
- **åŸºç¡€è®¾æ–½æ”¯æ’‘**ï¼šç¼“å­˜ã€å®‰å…¨ã€ç›‘æ§ç­‰åŸºç¡€ç»„ä»¶ä¼˜å…ˆå»ºè®¾
- **ä¸šåŠ¡åŠŸèƒ½å åŠ **ï¼šåŸºäºç¨³å®šåŸºç¡€è®¾æ–½é€æ­¥å®ç°ä¸šåŠ¡åŠŸèƒ½

### 3. å¼€å‘æ•ˆç‡å¯¼å‘
- **åç«¯ä¸»å¯¼**ï¼šAPIæ¥å£å’Œæ•°æ®ç»“æ„ç”±åç«¯å®šä¹‰ï¼Œå‰ç«¯é€‚é…
- **çœŸå®æ•°æ®é©±åŠ¨**ï¼šæ‰€æœ‰å¼€å‘åŸºäºçœŸå®æ•°æ®åº“æ•°æ®å’ŒAPIæ¥å£
- **å·¥å…·èµ‹èƒ½**ï¼šé›†æˆé«˜æ•ˆå¼€å‘å·¥å…·ï¼Œæå‡å¼€å‘è´¨é‡å’Œæ•ˆç‡
- **æ–‡æ¡£å…ˆè¡Œ**ï¼šå®Œå–„çš„æŠ€æœ¯æ–‡æ¡£æ”¯æ’‘å›¢é˜Ÿåä½œ

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆé€‰å‹

### æ ¸å¿ƒæ¡†æ¶ä¸æŠ€æœ¯

#### åç«¯æŠ€æœ¯æ ˆ
```
Spring Boot 3.3.x          // åº”ç”¨æ¡†æ¶
Java 21                   // å¼€å‘è¯­è¨€
Spring Security 6.x       // å®‰å…¨æ¡†æ¶
MyBatis-Plus 3.5.x        // ORMæ¡†æ¶
```

#### æ•°æ®å­˜å‚¨
```
MySQL 8.0                // ä¸»æ•°æ®åº“
Redis 7.x                // ç¼“å­˜ç³»ç»Ÿ
Elasticsearch 8.x         // å…¨æ–‡æœç´¢
```

#### å¼€å‘ä¸æµ‹è¯•å·¥å…·
```
Maven                    // é¡¹ç›®æ„å»º
JUnit 5.10+             // å•å…ƒæµ‹è¯•
Mockito 5.x             // Mockæµ‹è¯•
Testcontainers          // é›†æˆæµ‹è¯•
Instancio               // æµ‹è¯•æ•°æ®ç”Ÿæˆ
```

#### ç›‘æ§ä¸è¿ç»´
```
Spring Boot Admin        // åº”ç”¨ç›‘æ§
Prometheus + Grafana     // æŒ‡æ ‡ç›‘æ§
PLG Stack (Loki)        // æ—¥å¿—ç®¡ç†
Docker                  // å®¹å™¨åŒ–
```

### å·¥å…·åº“é›†æˆ

#### Hutool å…¨èƒ½å·¥å…·åŒ… 5.8.38
```java
// å­—ç¬¦ä¸²å¤„ç†
StrUtil.isBlank(str)           // å­—ç¬¦ä¸²åˆ¤ç©º
StrUtil.format(template, args) // å­—ç¬¦ä¸²æ ¼å¼åŒ–

// æ—¥æœŸæ—¶é—´
DateUtil.format(date, pattern) // æ—¥æœŸæ ¼å¼åŒ–
DateUtil.between(startTime, endTime) // æ—¶é—´å·®è®¡ç®—

// åŠ å¯†è§£å¯†
SecureUtil.md5(str)            // MD5åŠ å¯†
SecureUtil.aesEncrypt(data, key) // AESåŠ å¯†

// é›†åˆæ“ä½œ
CollUtil.isNotEmpty(list)       // é›†åˆåˆ¤ç©º
CollUtil.union(list1, list2)    // é›†åˆå¹¶é›†

// æ–‡ä»¶æ“ä½œ
FileUtil.readUtf8String(filePath) // æ–‡ä»¶è¯»å–
FileUtil.writeUtf8String(filePath, content) // æ–‡ä»¶å†™å…¥

// HTTPå®¢æˆ·ç«¯
HttpUtil.get(url)              // GETè¯·æ±‚
HttpUtil.post(url, data)       // POSTè¯·æ±‚
```

---

## ğŸ“ æ¶æ„æ¨¡å¼

### 1. DDD é¢†åŸŸé©±åŠ¨è®¾è®¡

#### åˆ†å±‚æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Interfaces Layer             â”‚  # æ¥å£å±‚ï¼šAPIæ¥å£ã€Webæ§åˆ¶å™¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Application Layer             â”‚  # åº”ç”¨å±‚ï¼šä¸šåŠ¡æµç¨‹ç¼–æ’ã€ç”¨ä¾‹å®ç°
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Domain Layer                â”‚  # é¢†åŸŸå±‚ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€é¢†åŸŸæ¨¡å‹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Infrastructure Layer            â”‚  # åŸºç¡€è®¾æ–½å±‚ï¼šæŠ€æœ¯å®ç°ã€å¤–éƒ¨ä¾èµ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é¢†åŸŸæ¨¡å—åˆ’åˆ†
```
æ ¸å¿ƒé¢†åŸŸæ¨¡å—ï¼š
â”œâ”€â”€ User Domain           # ç”¨æˆ·é¢†åŸŸï¼šæ³¨å†Œã€ç™»å½•ã€æƒé™
â”œâ”€â”€ Resource Domain       # èµ„æºé¢†åŸŸï¼šå½±è§†èµ„æºç®¡ç†
â”œâ”€â”€ Content Domain        # å†…å®¹é¢†åŸŸï¼šæ–‡ç« ã€Wikiç®¡ç†
â”œâ”€â”€ VIP Domain           # ä¼šå‘˜é¢†åŸŸï¼šä¼šå‘˜æƒç›Šã€è®¢å•
â”œâ”€â”€ Search Domain        # æœç´¢é¢†åŸŸï¼šå…¨æ–‡æœç´¢ã€æ¨è
â””â”€â”€ Crawler Domain       # çˆ¬è™«é¢†åŸŸï¼šèµ„æºé‡‡é›†ã€å¤„ç†

æ”¯æ’‘é¢†åŸŸæ¨¡å—ï¼š
â”œâ”€â”€ Auth Domain          # è®¤è¯é¢†åŸŸï¼šèº«ä»½éªŒè¯ã€æˆæƒ
â”œâ”€â”€ Payment Domain       # æ”¯ä»˜é¢†åŸŸï¼šæ”¯ä»˜æµç¨‹ã€äº¤æ˜“
â”œâ”€â”€ Notification Domain  # é€šçŸ¥é¢†åŸŸï¼šæ¶ˆæ¯æ¨é€ã€é‚®ä»¶
â””â”€â”€ Monitoring Domain    # ç›‘æ§é¢†åŸŸï¼šæ€§èƒ½ç›‘æ§ã€æ—¥å¿—
```

### 2. å…­è¾¹å½¢æ¶æ„ï¼ˆPorts & Adaptersï¼‰

#### æ ¸å¿ƒè®¾è®¡ç†å¿µ
- **ä¸šåŠ¡æ ¸å¿ƒéš”ç¦»**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¸æŠ€æœ¯å®ç°å®Œå…¨è§£è€¦
- **ç«¯å£å®šä¹‰**ï¼šé€šè¿‡æ¥å£å®šä¹‰ä¸šåŠ¡æ ¸å¿ƒä¸å¤–éƒ¨çš„äº¤äº’ç‚¹
- **é€‚é…å™¨å®ç°**ï¼šå…·ä½“æŠ€æœ¯å®ç°é€šè¿‡é€‚é…å™¨æ¨¡å¼é›†æˆ
- **å¯æ›¿æ¢æ€§**ï¼šæŠ€æœ¯å®ç°å¯ä»¥ç‹¬ç«‹äºä¸šåŠ¡æ ¸å¿ƒè¿›è¡Œæ›¿æ¢

#### ç«¯å£ä¸é€‚é…å™¨
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Core Domain   â”‚
                    â”‚                 â”‚
                    â”‚  Business Logic â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        â”‚        â”‚
             Input Ports  â”‚   Output Ports
           (Service Interfaces)   â”‚
                    â”‚        â”‚        â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                          â”‚           â”‚
  Input Adapters               Output Adapters
  (Controllers)            (Database, External APIs)
```

---

## ğŸ—‚ï¸ ç³»ç»Ÿåˆ†å±‚è¯¦è§£

### 1. æ¥å£å±‚ (Interfaces Layer)

#### èŒè´£
- å¤„ç†å¤–éƒ¨è¯·æ±‚å’Œå“åº”
- æ•°æ®ä¼ è¾“å¯¹è±¡è½¬æ¢
- å‚æ•°éªŒè¯å’Œæ ¼å¼åŒ–
- å¼‚å¸¸å¤„ç†å’Œé”™è¯¯å“åº”

#### ä¸»è¦ç»„ä»¶
```java
// REST API æ§åˆ¶å™¨
@RestController
@RequestMapping("/api/v1/users")
public class UserController {
    // å¤„ç†HTTPè¯·æ±‚ï¼Œè°ƒç”¨åº”ç”¨æœåŠ¡
}

// WebSocket å¤„ç†å™¨
@Component
public class NotificationHandler {
    // å¤„ç†å®æ—¶æ¶ˆæ¯æ¨é€
}

// å¯¹è±¡ç»„è£…å™¨
@Component
public class UserAssembler {
    // DTOä¸å®ä½“å¯¹è±¡è½¬æ¢
}
```

### 2. åº”ç”¨å±‚ (Application Layer)

#### èŒè´£
- ä¸šåŠ¡æµç¨‹ç¼–æ’
- ç”¨ä¾‹é€»è¾‘å®ç°
- äº‹åŠ¡è¾¹ç•Œæ§åˆ¶
- é¢†åŸŸæœåŠ¡åè°ƒ

#### ä¸»è¦ç»„ä»¶
```java
// åº”ç”¨æœåŠ¡
@Service
public class UserApplicationService {
    // ç”¨æˆ·æ³¨å†Œç”¨ä¾‹å®ç°
    public UserDTO register(UserRegisterRequest request) {
        // 1. å‚æ•°éªŒè¯
        // 2. è°ƒç”¨é¢†åŸŸæœåŠ¡
        // 3. ä¿å­˜æ•°æ®
        // 4. å‘å¸ƒäº‹ä»¶
    }
}

// äº‹ä»¶å‘å¸ƒå™¨
@Component
public class DomainEventPublisher {
    // å‘å¸ƒé¢†åŸŸäº‹ä»¶
}
```

### 3. é¢†åŸŸå±‚ (Domain Layer)

#### èŒè´£
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®ç°
- é¢†åŸŸæ¨¡å‹å®šä¹‰
- ä¸šåŠ¡è§„åˆ™éªŒè¯
- é¢†åŸŸæœåŠ¡å®ç°

#### ä¸»è¦ç»„ä»¶
```java
// é¢†åŸŸå®ä½“
@Entity
public class User {
    private UserId id;
    private Email email;
    private Password password;

    // ä¸šåŠ¡æ–¹æ³•
    public void changePassword(Password newPassword) {
        // å¯†ç ä¿®æ”¹ä¸šåŠ¡é€»è¾‘
    }
}

// é¢†åŸŸæœåŠ¡
@Service
public class UserDomainService {
    // å¤æ‚ä¸šåŠ¡é€»è¾‘
    public boolean isEmailUnique(Email email) {
        // é‚®ç®±å”¯ä¸€æ€§æ£€æŸ¥
    }
}

// ä»“å‚¨æ¥å£
public interface UserRepository {
    User save(User user);
    User findById(UserId id);
    List<User> findByCriteria(UserCriteria criteria);
}
```

### 4. åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)

#### èŒè´£
- æŠ€æœ¯å®ç°ç»†èŠ‚
- å¤–éƒ¨æœåŠ¡é›†æˆ
- æ•°æ®æŒä¹…åŒ–
- äº¤å‰å…³æ³¨ç‚¹

#### ä¸»è¦ç»„ä»¶
```java
// ä»“å‚¨å®ç°
@Repository
public class UserRepositoryImpl implements UserRepository {
    // MyBatis-Pluså®ç°æ•°æ®è®¿é—®
}

// å¤–éƒ¨æœåŠ¡é€‚é…å™¨
@Service
public class PaymentGatewayAdapter {
    // æ”¯ä»˜ç½‘å…³é›†æˆ
}

// ç¼“å­˜å®ç°
@Service
public class RedisCacheService implements CacheService {
    // Redisç¼“å­˜æ“ä½œ
}
```

---

## ğŸ—„ï¸ æ•°æ®æ¶æ„è®¾è®¡

### 1. æ•°æ®åº“åˆ†å±‚è®¾è®¡

#### ç¬¬ä¸€å±‚ï¼šæ ¸å¿ƒåŸºç¡€è¡¨ï¼ˆé˜¶æ®µ1ï¼‰
```sql
-- ç”¨æˆ·æƒé™æ ¸å¿ƒè¡¨
users, user_profiles, roles, permissions

-- ç³»ç»ŸåŸºç¡€è¡¨
system_configs, dictionaries, file_storages

-- å®¡è®¡æ—¥å¿—è¡¨
operation_logs, audit_logs
```

#### ç¬¬äºŒå±‚ï¼šä¸šåŠ¡åŠŸèƒ½è¡¨ï¼ˆé˜¶æ®µ2-4ï¼‰
```sql
-- è®¤è¯æƒé™è¡¨ï¼ˆé˜¶æ®µ2ï¼‰
user_roles, refresh_tokens, login_history

-- VIPä¸šåŠ¡è¡¨ï¼ˆé˜¶æ®µ3ï¼‰
vip_memberships, orders, payment_records

-- ç”¨æˆ·ä¸­å¿ƒè¡¨ï¼ˆé˜¶æ®µ4ï¼‰
favorites, download_history, user_comments
```

#### ç¬¬ä¸‰å±‚ï¼šé«˜çº§åŠŸèƒ½è¡¨ï¼ˆé˜¶æ®µ5-6ï¼‰
```sql
-- PTç«™ç‚¹é›†æˆè¡¨
pt_sites, torrent_files, crawl_tasks

-- è´¨é‡ç®¡ç†è¡¨
quality_scores, duplicate_detection

-- ç›‘æ§åˆ†æè¡¨
search_logs, user_statistics
```

### 2. ç¼“å­˜æ¶æ„è®¾è®¡

#### å¤šçº§ç¼“å­˜ç­–ç•¥
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Application               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         L1 Cache (Caffeine)         â”‚  # æœ¬åœ°ç¼“å­˜ï¼Œçƒ­ç‚¹æ•°æ®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         L2 Cache (Redis)            â”‚  # åˆ†å¸ƒå¼ç¼“å­˜ï¼Œå…±äº«æ•°æ®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Database (MySQL)            â”‚  # æŒä¹…åŒ–å­˜å‚¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç¼“å­˜åœºæ™¯è®¾è®¡
```java
// ç”¨æˆ·ç¼“å­˜
@Cacheable(value = "user:session", key = "#userId")
public UserSession getUserSession(Long userId) {
    // ç”¨æˆ·ç™»å½•çŠ¶æ€ç¼“å­˜ï¼ŒTTL 2å°æ—¶
}

// ç³»ç»Ÿé…ç½®ç¼“å­˜
@Cacheable(value = "system:config", key = "#configKey")
public SystemConfig getSystemConfig(String configKey) {
    // ç³»ç»Ÿé…ç½®ç¼“å­˜ï¼ŒTTL 24å°æ—¶
}

// èµ„æºç¼“å­˜
@Cacheable(value = "resource:hot", key = "#categoryId")
public List<Resource> getHotResources(Long categoryId) {
    // çƒ­é—¨èµ„æºç¼“å­˜ï¼ŒTTL 30åˆ†é’Ÿ
}
```

---

## ğŸ” å®‰å…¨æ¶æ„è®¾è®¡

### 1. è®¤è¯æˆæƒæ¶æ„

#### JWT è®¤è¯æµç¨‹
```
Client â†’ API Gateway â†’ Authentication Service â†’ JWT Token â†’ Resource Access
```

#### RBAC æƒé™æ¨¡å‹
```
User â†’ UserRole â†’ Role â†’ RolePermission â†’ Permission
  ç”¨æˆ·    ç”¨æˆ·è§’è‰²    è§’è‰²    è§’è‰²æƒé™        æƒé™
```

### 2. æ•°æ®å®‰å…¨è®¾è®¡

#### å¯†ç å®‰å…¨
```java
@Component
public class PasswordService {
    // BCryptåŠ å¯†
    public String encryptPassword(String rawPassword) {
        return BCrypt.hashpw(rawPassword, BCrypt.gensalt());
    }

    // å¯†ç éªŒè¯
    public boolean verifyPassword(String rawPassword, String encodedPassword) {
        return BCrypt.checkpw(rawPassword, encodedPassword);
    }
}
```

#### æ•æ„Ÿæ•°æ®å¤„ç†
```java
// æ•°æ®è„±æ•
public class UserDataMasking {
    public String maskEmail(String email) {
        // user@example.com â†’ u***@example.com
        return email.replaceAll("(?<=.).(?=[^@]*?@)", "*");
    }

    public String maskPhone(String phone) {
        // 13812345678 â†’ 138****5678
        return phone.replaceAll("(\\d{3})\\d{4}(\\d{4})", "$1****$2");
    }
}
```

---

## ğŸ”§ éƒ¨ç½²æ¶æ„è®¾è®¡

### 1. å®¹å™¨åŒ–éƒ¨ç½²

#### Docker å¤šé˜¶æ®µæ„å»º
```dockerfile
# æ„å»ºé˜¶æ®µ
FROM maven:3.9-openjdk-21 AS builder
WORKDIR /app
COPY pom.xml .
COPY src ./src
RUN mvn clean package -DskipTests

# è¿è¡Œé˜¶æ®µ
FROM openjdk:21-jre-slim
WORKDIR /app
COPY --from=builder /app/target/*.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

#### Docker Compose ç¼–æ’
```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "8080:8080"
    depends_on:
      - mysql
      - redis
    environment:
      - SPRING_PROFILES_ACTIVE=dev

  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: knene_db

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
```

### 2. ç°ä»£åŒ–éƒ¨ç½²æ¶æ„

#### Nginx åå‘ä»£ç†
```nginx
upstream backend {
    server app1:8080;
    server app2:8080;
}

server {
    listen 80;
    location /api/ {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /static/ {
        root /var/www/static;
        expires 1y;
    }
}
```

#### ç›‘æ§ä½“ç³»
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   App A     â”‚    â”‚   App B     â”‚    â”‚   App C     â”‚
â”‚   + Grafana â”‚â”€â”€â”€â–¶â”‚  + Prometheusâ”‚â”€â”€â”€â–¶â”‚  + Loki     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Spring Boot  â”‚
                  â”‚   Admin      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. æ•°æ®åº“ä¼˜åŒ–
- **ç´¢å¼•ç­–ç•¥**ï¼šå¤åˆç´¢å¼•ã€è¦†ç›–ç´¢å¼•ä¼˜åŒ–
- **æŸ¥è¯¢ä¼˜åŒ–**ï¼šé¿å…SELECT *ï¼Œåˆç†ä½¿ç”¨EXISTS
- **è¿æ¥æ± **ï¼šDruidè¿æ¥æ± é…ç½®ä¸ç›‘æ§
- **è¯»å†™åˆ†ç¦»**ï¼šåæœŸå¯è€ƒè™‘ä¸»ä»å¤åˆ¶

### 2. ç¼“å­˜ä¼˜åŒ–
- **ç¼“å­˜é¢„çƒ­**ï¼šåº”ç”¨å¯åŠ¨æ—¶é¢„åŠ è½½çƒ­ç‚¹æ•°æ®
- **ç¼“å­˜ç©¿é€**ï¼šå¸ƒéš†è¿‡æ»¤å™¨ + ç©ºå€¼ç¼“å­˜
- **ç¼“å­˜é›ªå´©**ï¼šéšæœºTTL + å¤šçº§é™çº§
- **ç¼“å­˜å‡»ç©¿**ï¼šäº’æ–¥é” + çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ

### 3. æ¥å£ä¼˜åŒ–
- **é™æµç­–ç•¥**ï¼šç”¨æˆ·çº§åˆ«ã€IPçº§åˆ«ã€æ¥å£çº§åˆ«é™æµ
- **å¼‚æ­¥å¤„ç†**ï¼šéæ ¸å¿ƒä¸šåŠ¡å¼‚æ­¥åŒ–å¤„ç†
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡æ•°æ®æ“ä½œ
- **å“åº”å‹ç¼©**ï¼šå¯ç”¨gzipå‹ç¼©å‡å°‘ä¼ è¾“

---

## ğŸ”® æ¶æ„æ¼”è¿›è§„åˆ’

### çŸ­æœŸç›®æ ‡ï¼ˆ6ä¸ªæœˆï¼‰
- âœ… å•ä½“æ¶æ„ç°ä»£åŒ–å®æ–½
- âœ… DDDæ¶æ„æ¨¡å¼è½åœ°
- âœ… å®Œå–„çš„æŠ€æœ¯å·¥å…·é“¾é›†æˆ
- âœ… ç¨³å®šçš„ç›‘æ§è¿ç»´ä½“ç³»

### ä¸­æœŸç›®æ ‡ï¼ˆ1-2å¹´ï¼‰
- ğŸš€ æ€§èƒ½ä¼˜åŒ–å’Œæ‰©å±•
- ğŸš€ æœç´¢åŠŸèƒ½å¢å¼º
- ğŸš€ é«˜å¯ç”¨éƒ¨ç½²æ¶æ„
- ğŸš€ æ•°æ®åˆ†æèƒ½åŠ›å»ºè®¾

### é•¿æœŸç›®æ ‡ï¼ˆ2å¹´ä»¥ä¸Šï¼‰
- ğŸ¯ å¾®æœåŠ¡åŒ–æ”¹é€ ï¼ˆå¦‚éœ€è¦ï¼‰
- ğŸ¯ äº‘åŸç”Ÿæ¶æ„è¿ç§»
- ğŸ¯ å¤§æ•°æ®å¤„ç†èƒ½åŠ›
- ğŸ¯ AI/ML åŠŸèƒ½é›†æˆ

---

## ğŸ“‹ æ¶æ„å†³ç­–è®°å½• (ADR)

### ADR-001: å•ä½“æ¶æ„ vs å¾®æœåŠ¡æ¶æ„
**å†³ç­–**ï¼šé‡‡ç”¨å•ä½“æ¶æ„
**åŸå› **ï¼š
- å›¢é˜Ÿè§„æ¨¡å°ï¼Œå•ä½“æ¶æ„æ›´é«˜æ•ˆ
- æŠ€æœ¯å¤æ‚åº¦å¯æ§ï¼Œç»´æŠ¤æˆæœ¬ä½
- éƒ¨ç½²è¿ç»´ç®€å•ï¼Œé€‚åˆå¿«é€Ÿè¿­ä»£
- é¢„ç•™å¾®æœåŠ¡åŒ–æ”¹é€ ç©ºé—´

### ADR-002: DDD + å…­è¾¹å½¢æ¶æ„
**å†³ç­–**ï¼šé‡‡ç”¨DDDé¢†åŸŸé©±åŠ¨è®¾è®¡å’Œå…­è¾¹å½¢æ¶æ„
**åŸå› **ï¼š
- ä¸šåŠ¡å¤æ‚åº¦é«˜ï¼Œéœ€è¦æ¸…æ™°çš„é¢†åŸŸæ¨¡å‹
- æŠ€æœ¯ä¸ä¸šåŠ¡è§£è€¦ï¼Œæé«˜å¯æµ‹è¯•æ€§
- æ”¯æŒæ¸è¿›å¼æ¶æ„æ¼”è¿›
- ä¾¿äºå›¢é˜Ÿç†è§£å’Œç»´æŠ¤

### ADR-003: Redisç¼“å­˜ç­–ç•¥
**å†³ç­–**ï¼šé‡‡ç”¨Cache-Aside + å¤šçº§ç¼“å­˜ç­–ç•¥
**åŸå› **ï¼š
- æä¾›é«˜æ€§èƒ½æ•°æ®è®¿é—®
- ä¿è¯ç¼“å­˜ä¸€è‡´æ€§
- æ”¯æŒé«˜å¹¶å‘è®¿é—®
- ä¾¿äºç›‘æ§å’Œè¿ç»´

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæ¶æ„è®¾è®¡æ–‡æ¡£éšé¡¹ç›®å‘å±•æŒç»­æ›´æ–°
**æœ€åæ›´æ–°**ï¼š2025-10-29
**ç»´æŠ¤äººå‘˜**ï¼šå¼€å‘å›¢é˜Ÿ